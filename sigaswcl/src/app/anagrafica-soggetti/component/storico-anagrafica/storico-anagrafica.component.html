<div role="listbox" aria-label="Navigazione nascosta per screen reader" id="idDivToContPrin" tabindex="-1"></div>
<div aria-relevant="true">
    <a href='#principal-div-id' class="skip-link" role="listitem" id="idAnchorToContPrin">Vai al contenuto
        principale</a>
</div>
<div class="principal-div" id="principal-div-id" name="principal-div-id">
    <div class="card card-primary center-default">
        <div class="card-header text-white">
            <h3 class="h1-font"><strong>Storico anagrafica</strong></h3>
        </div>
        <div>
            <sigas-alert [message]="message" [type]="type"></sigas-alert>
            
            <div class="card-body container">
                <!--testata-->
                <div class="form-group row padding-search">
                    <!--anno-->
                    <div class="form-group col-lg-12">
                        <sigas-alert [message]="messageError" *ngIf="showMessageError" [type]="'DANGER'"></sigas-alert>
                        <div class="row">
                            <!-- <label id="lblAnno" for="anno" class="col-lg-2 col-form-label">Anno tributo:</label>
                            <sigas-spinner-form [diameter]="30"
                                *ngIf="loaderYear;  else elseAnnoCaricato"></sigas-spinner-form>
                            <ng-template #elseAnnoCaricato>
                                <div class="col-lg-2">
                                    <select class="form-control" id="anno" aria-labelledby="lblAnno"
                                        [(ngModel)]="ricercaStoricoSoggettiRequest.annualita" name="anno">
                                        <option *ngFor="let anno of reportAnno" [value]="anno">{{anno}}</option>
                                    </select>
                                </div>
                            </ng-template>
                            <div class="col-lg-1"></div> -->

                            <label id="lblDenominazione" for="denominazione"
                            class="col-lg-2 col-form-label">Denominazione:</label>
                            <div class="col-lg-9">
                                <input type="text" id="denominazione" aria-labelledby="lblDenominazione"
                                    class="form-control"
                                    [(ngModel)]="ricercaStoricoSoggettiRequest.denominazioneSoggetto"
                                    placeholder="Denominazione soggetto" name="denominazione">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group col-lg-12">
                        <div class="row">
                            <label id="lblcfPiva" for="cfPiva" class="col-lg-2 col-form-label">Codice Fiscale/P.
                                IVA:</label>
                            <div class="col-lg-3">
                                <input type="text" id="cfPiva" aria-labelledby="lblcfPiva" class="form-control"
                                    [(ngModel)]="ricercaStoricoSoggettiRequest.cfPiva"
                                    placeholder="Codice Fiscale/Partita IVA" name="cfPiva">
                            </div>

                            <label id="lblCodAzienda" for="codAzienda" class="col-lg-2 col-form-label">Codice
                                azienda:</label>
                            <div class="col-lg-4">
                                <input type="text" id="codAzienda" aria-labelledby="lblCodAzienda" class="form-control"
                                    [(ngModel)]="ricercaStoricoSoggettiRequest.codiceAzienda"
                                    placeholder="Codice azienda" name="codAzienda">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group col-lg-12">
                        <div class="row">
                            <label id="lblIndirizzo" for="indirizzo" class="col-lg-2 col-form-label">Indirizzo:</label>
                            <div class="col-lg-9">
                                <input type="text" id="indirizzo" aria-labelledby="lblIndirizzo" class="form-control"
                                    [(ngModel)]="ricercaStoricoSoggettiRequest.indirizzo" placeholder="Indirizzo"
                                    name="indirizzo">
                            </div>
                        </div>
                    </div>
                </div>

                <!--pulsanti-->
                <div class="bs-example" data-example-id="single-button-dropdown">
                    <div class="form-group row col-lg-12">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                            <div class="btn-group">
                                <!--Cancella-->
                                <a class="btn btn-default margin-icon btn-standard" (click)="pulisciCampi()" role="button">
                                    <i class="fas fa-times"></i>Cancella</a>
                            </div>
                            <div class="btn-group">
                                <!--Cerca-->
                                <button type="submit" class="btn btn-primary margin-icon" (click)="ricercaStoricoAnagraficaSoggetti()">
                                    <i class="fas fa-check"></i> Cerca</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="table-90">
                <div class="form-group row">
                    <div class="table-90 ">
                        <sigas-spinner-form [diameter]="30" *ngIf="loaderDT"></sigas-spinner-form>

                        <!-- Table -->

                        <table [style.display]="!loaderDT ? '' : 'none' " id="tblStoricoAnagrafica"
                            class="row-border hover table-striped" [dtOptions]="dtOptionsStoricoAnagrafica"
                            [dtTrigger]="dtTriggerStoricoAnagrafica" datatable width="100%">
                            <thead>
                                <tr>
                                    <th class="align-left padding-right-15" scope="col">Info</th>
                                    <!-- <th class="align-left padding-right-15" scope="col">Codice Azienda</th>
                                    <th class="align-left padding-right-15" scope="col">Denominazione</th> -->
                                    <th class="align-left padding-right-15" scope="col">CF / P.Iva  <br>IBAN</th>
                                    <!-- <th class="align-left padding-right-15" scope="col">IBAN</th> -->
                                    <th class="align-left padding-right-15" scope="col">Indirizzo</th>
                                    <th class="align-left padding-right-15" scope="col">Email/PEC</th>
                                    <!-- <th class="align-left padding-right-15" scope="col">Email</th>
                                    <th class="align-left padding-right-15" scope="col">PEC</th> -->
                                    <!-- <th class="align-left padding-right-15" scope="col">Anno tributo</th> -->
                                    <th class="align-left padding-right-15" scope="col">Data modifica</th>
                                    <!--<th class="align-left padding-right-15" scope="col">Tipo <br>elaborazione</th>-->
                                    <th class="align-left padding-right-15" scope="col">Tip.</th>
                                    <!--<td class="align-left padding-right-15" scope="col"></td>-->
                                    <th class="align-left padding-right-15" scope="col">Identificativo <br>Import</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let el of storicoAnagraficaList;">
                                    <td class="padding-right-15">Denominazione: {{ el.denominazione }}
                                        <br>Cod. azienda: {{ el.codiceAzienda }}</td>
                                    <!-- <td class="padding-right-15">{{ el.codiceAzienda }}</td>
                                    <td class="padding-right-15">{{ el.denominazione }}</td> -->
                                    <td class="padding-right-15">CF / P.Iva: {{ el.cfPiva }}
                                        <br>IBAN: {{ el.iban }}
                                    </td>
                                    <!-- <td class="padding-right-15">{{ el.iban }}</td> -->
                                    <td class="padding-right-15">{{ el.indirizzo }}</td>
                                    <td class="padding-right-15">Email: {{ el.email }}
                                        <br>PEC: {{ el.pec }}
                                    </td>
                                    <!-- <td class="padding-right-15">{{ el.email }}</td>
                                    <td class="padding-right-15">{{ el.pec }}</td> -->
                                    
                                    <td class="padding-right-15">{{ el.dataRiferimento | date:'dd/MM/yyyy HH:mm:ss'
                                        }}</td>

                                    <!--<td class="padding-right-15">{{ el.tipoElaborazione }}</td>-->
                                    <td class="padding-right-15">
                                        <img *ngIf="el.ownerOperazione == 'OPERATORE'" style="width:25px; height:25px;"
                                            alt="Operazione eseguita da un operatore"
                                            title="Operazione eseguita da un operatore" src="assets/operatore-black.png">
                                        <img *ngIf="el.ownerOperazione == 'IMPORT'" style="width:25px; height:25px;"
                                            alt="Operazione eseguita mediante import UTF"
                                            title="Operazione eseguita mediante import UTF" src="assets/importUTF-black.png">
                                    </td>
                                    <!--
                                    <td *ngIf="el.idImport != null"> 
                                        <img style="width:25px; height:25px;" class="cursor-pointer"
                                            alt="Visualizza dashboard consumi" title="Visualizza dashboard consumi"
                                            src="assets/mostraConsumi.png"
                                            data-toggle="modal" 
                                            data-target="#mdlDashboardConsumi"
                                            (click)="showImportUTF(el)" >
                                    </td>                                    
                                    <td *ngIf="el.idImport == null"> </td>
                                    -->
                                    <td class="padding-right-15">{{ el.idImport }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- dashboard consumi -->
<div class="modal fade" 
     id="mdlDashboardConsumi" 
     tabindex="-1" 
     data-backdrop="static" 
     data-keyboard="false" 
     role="dialog"
     aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">        
        <div class="modal-content">
            <div class="modal-header">                
                <span class="modal-title h5-font" id="dashboardConsumiTitle"><b>Dashboard Consumi</b></span>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>                
            </div> 
            <div class="modal-body overflow-x-scroll center-default">                
                <div class="contains">
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">                         
                                <label class="col-lg-5 offset-sm-1 col-form-label">Ind. 1200:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.usi_industriali_1200 | currency:'EUR':'symbol' }}
                                    </div>
                                </div>
                            </div>                        
                        </div>           
                    </div>
                    <!--END Ind. 1200 -->
        
                    <!-- Ind > 1200 -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Ind. > 1200:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.usi_industriali_up | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>             
                    </div>
                    <!--END Ind. > 1200 -->
        
                    <!-- TOT Ind. -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Tot. Ind.:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.tot_industriali | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>            
                    </div>
                    <!--END Tot Ind -->
        
                    <!-- CIV 120 -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Civ. 120:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.usi_civili_120 | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>             
                    </div>
                    <!--END Civ. 120 -->
        
                    <!-- Civ. 480 -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Civ. 480:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.usi_civili_480 | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>              
                    </div>
                    <!--END Civ. 480 -->
        
                    <!-- Civ. 1560 -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Civ. 1560:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.usi_civili_1560 | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>            
                    </div>
                    <!--END Civ. 1560 -->
        
                    <!-- Civ. > 1560 -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Civ. > 1560:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.usi_civili_up | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>          
                    </div>
                    <!--END Civ. > 1560 -->
        
                    <!-- Tot. Civ. -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Tot. Civ.:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.tot_civili | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>               
                    </div>
                    <!--END Tot. Civ. -->
        
                    <!-- Tot. nuovi allac. -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Tot. nuovi allac.:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.tot_nuovi_allacciamenti | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>               
                    </div>
                    <!--END Tot. nuovi allac. -->
        
                    <!-- Conguaglio Dichiarato -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Congualglio Dich:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.conguaglio_dich | currency:'EUR':'symbol'}}    
                                    </div>
                                </div>
                            </div>                        
                        </div>               
                    </div>
                    <!--END Conguaglio Dichiarato -->
        
                    <!-- Totale Dichiarato -->
                    <!-- -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Totale Dich.:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.totaleDich | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>              
                    </div>            
                    <!--END Totale Dichiarato -->
        
                    <!-- Rateo Dichiarato. -->
                    <!--  -->
                    <div class="row">                 
                        <div class="col-lg-12 hight">                       
                            <div class="form-group border-botton row">
                                <label class="col-lg-5 offset-sm-1 col-form-label">Rateo Dich.:</label>
                                <div class="col-lg-6 col-value">
                                    <!-- Spinner component -->
                                    <sigas-spinner-form [diameter]="30" *ngIf="loaderImportItems"></sigas-spinner-form>
                                    <div *ngIf="!loaderImportItems">
                                        {{importConsumiPrViewContainer?.rateo_dich | currency:'EUR':'symbol'}}
                                    </div>
                                </div>
                            </div>                        
                        </div>               
                    </div>        
                    <div class="row">
                         <!-- Bottoni province -->
                         <div class="col-lg-12 hight">
                            <div class="btn-group-toggle form-group border-botton row margin-top-toggle" data-toggle="buttons">
                                <!-- Spinner component -->
                                <sigas-spinner-form [diameter]="30" *ngIf="loaderImportElencoProvince"></sigas-spinner-form>
                                <!-- cambia provincia -->                            
                                <label *ngFor="let provincia of importElencoProvince" 
                                        [hidden]="provincia.sigla == null" 
                                        class="btn btn-secondary pointer margin-icon margin-bottom-toggle">
                                    <input type="radio" 
                                            name="iptProvinciaImport-{{provincia.sigla}}" 
                                            id="iptProvinciaImport-{{provincia.sigla}}" 
                                            (click)="onCambiaProvinciaImport(provincia.sigla)">{{provincia.sigla}}
                                </label>
                                <sigas-spinner-form [diameter]="30" *ngIf="loaderImportElencoProvince"></sigas-spinner-form>                                                  
                                <!-- cambia provincia TOTALE -->
                                <label *ngIf="!loaderImportElencoProvince" 
                                        class="btn btn-secondary pointer margin-icon margin-bottom-toggle">
                                    <input type="radio"                                    
                                        ref="totaleRef-comparazioneIncorporante" 
                                        id="iptTotaleImport" 
                                        name="iptTotaleImport"  
                                        (click)="onCambiaProvinciaImport('TOTALE')"> TOTALE
                                </label>                                                  
                            </div>
                            <!-- <div class="btn-group-toggle form-group border-botton row margin-top-toggle" data-toggle="buttons">
                                
                                <sigas-spinner-form [diameter]="30" *ngIf="loaderImportElencoProvince"></sigas-spinner-form>                                                  
                                
                                <label *ngIf="!loaderImportElencoProvince" 
                                        class="btn btn-secondary pointer margin-icon margin-bottom-toggle">
                                    <input type="radio"                                    
                                        ref="totaleRef-comparazioneIncorporante" 
                                        id="iptTotaleImport" 
                                        name="iptTotaleImport"  
                                        (click)="onCambiaProvinciaImport('TOTALE')"> TOTALE
                                </label>
                            </div> -->
                         </div>                
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>