<div class="principal-div">
<sigas-spinner *ngIf="!loaderDichiarante"></sigas-spinner>
    <div class="card card-primary center-default" *ngIf="loaderDichiarante">
        <div class="card-header text-white">
            <strong>Accreditamento</strong> - Dati Società</div>
       
        <div  [ngStyle]="{'display': !loaderInsNuovoDichiarante ? 'block' : 'none'}" >
         <form #ricercaDichiarante="ngForm" >
      <sigas-alert [message]="'Inserire Denominazione e Codice Azienda per ricercare la società'"
        [type]="'INFO'"></sigas-alert>
         <sigas-alert *ngIf="showMessageInfo" [message]="messageInfo" [type]="'INFO'"></sigas-alert>
        <sigas-alert *ngIf="showMessage" [message]="message" [type]="tipoMessaggio"></sigas-alert>
      <div class="panel-body">
        <div class="form-group row col-lg-12">
          <div class="col-lg-2"></div>
          <label for="denominazione" class="col-lg-3 col-form-label">Denominazione:</label>
          <div class="col-lg-5">
            <input type="text" class="form-control col-lg-6 col-form-label" id="denominazione" [(ngModel)]="ricercaModel.denominazione"
              name="denominazione" [required]="ricercaModel.codiceAzienda==null || ricercaModel.codiceAzienda==''"
              maxlength="150">
          </div>
          <div class="col-lg-2"></div>
        </div>
        <div class="form-group row col-lg-12">
          <div class="col-lg-2"></div>
          <label for="codiceAzienda" class="col-lg-3 col-form-label">Codice Azienda:</label>
          <div class="col-lg-5">
            <input type="text" [(ngModel)]="ricercaModel.codiceAzienda" name="codiceAzienda" class="form-control maiuscolo col-lg-6 col-form-label"
              id="codiceAzienda" [required]="ricercaModel.denominazione==null || ricercaModel.denominazione==''"maxlength="150">
          </div>
          <div class="col-lg-2"></div>
        </div>

        <!--pulsanti-->
        <div class="bs-example" data-example-id="single-button-dropdown">
          <div class="form-group row col-lg-12">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
              <div class="btn-group">
                <a class="btn btn-default margin-icon btn-standard" href="#" role="button">
                  <i class="fa fa-angle-left glyphicon glyphicon-chevron-left"></i>
                  indietro</a>
              </div>
              <div class="btn-group">
                <button type="button" (click)="cancellaCampiRicerca()" class="btn btn-primary margin-icon btn-standard">
                  <i class="fas fa-times"></i>
                  Cancella</button>
              </div>
              <div class="btn-group">
                <button type="button" [disabled]="!ricercaDichiarante.form.valid" class="btn btn-primary margin-icon btn-standard"  (click)="cercaDichiarante()">
                  <i class="fa fa-angle-right glyphicon glyphicon-search"></i> Cerca</button>
              </div>
            </div>
          </div>
        </div>
         <!--pulsanti-->
         
        <div class=" form-group col-lg-12">
                            <div class="form-group col-lg-12">
                                <sigas-spinner-form [diameter]="30" *ngIf="loaderDT"></sigas-spinner-form>
                                <table [style.display]="!loaderDT ? '' : 'none' " id="elenco-soggetti"
                                    class="row-border hover" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" width="100%">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>Dichiarante</th>
                                            <th>Codice Azienda</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="pointer" *ngFor="let el of dichiaranteModelList">
                                     		<td>
                                                <input type="radio"  name="selection" (click)="associaDichiarante(el)">
                                            </td> 
                                            <td>{{ el.denominazione }}</td>
                                            <td>{{ el.codiceAzienda }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        
                        <!--pulsanti-->
        <div class="bs-example" data-example-id="single-button-dropdown">
          <div class="form-group row col-lg-12">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
              
              <div class="btn-group" *ngIf="dichiaranteModelList">
                <button type="button" [disabled]="!inserisciAccreditamentoService.confermaDichiarante" class="btn btn-primary margin-icon btn-standard"  (click)="confermaInsDichiarante()">
                  <i class="fa fa-angle-right glyphicon glyphicon-search"></i> Conferma</button>
              </div>
              
              <div class="btn-group" *ngIf="primaRicercaSenzaRisultati">
                <button type="button"  class="btn btn-primary margin-icon btn-standard"  (click)="nuovoDichiarante()">
                  <i class="fa fa-angle-right glyphicon glyphicon-search"></i> Nuovo</button>
              </div>
              
            </div>
          </div>
        </div>
         <!--pulsanti-->
      
      </div>
     
    </form>
    </div>
    <div  [ngStyle]="{'display': loaderInsNuovoDichiarante ? 'block' : 'none'}" >
        <form #insDichiarante="ngForm" >
        <sigas-alert [message]="'Inserire i dati per la nuova società'"
        [type]="'INFO'"></sigas-alert>
         <sigas-alert *ngIf="showMessageInfo" [message]="messageInfo" [type]="'INFO'"></sigas-alert>
        <sigas-alert *ngIf="showMessage" [message]="message" [type]="tipoMessaggio"></sigas-alert>
            <div class="panel-body">
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1"></div>
                    <label for="denominazione" class="col-lg-3 col-form-label">Denominazione:</label>
                    <div class="col-lg-4">
                        <div>
                            <input type="text" class="form-control col-lg-6 col-form-label" id="denominazione"
                                placeholder="Denominazione" [(ngModel)]="dichiaranteModel.denominazione" name="denominazione"
                                #denominazione="ngModel" required maxlength="150">
                        </div>
                        <div *ngIf="denominazione.invalid && (denominazione.dirty || denominazione.touched)" class="alert alert-danger">
                            <div *ngIf="denominazione.errors.required ">
                                Denominazione richiesta.
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4"></div>
                </div>
                
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1"></div>
                    <label for="codiceAzienda" class="col-lg-3 col-form-label">Codice Azienda:</label>
                    <div class="col-lg-4">
                        <div>
                            <input type="text" class="form-control col-lg-6 col-form-label" id="codiceAzienda"
                                placeholder="codiceAzienda" [(ngModel)]="dichiaranteModel.codiceAzienda" name="codiceAzienda"
                                #codiceAzienda="ngModel" required maxlength="150">
                        </div>
                        <div *ngIf="codiceAzienda.invalid && (codiceAzienda.dirty || codiceAzienda.touched)" class="alert alert-danger">
                            <div *ngIf="codiceAzienda.errors.required ">
                                Codice Azienda richiesto.
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4"></div>
                </div>
                <!-- 
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1 "></div>
                    <label for="regione " class="col-lg-3 col-form-label ">Regione:</label>
                    <div class="col-lg-4 ">
                        <sigas-spinner-form [diameter]="30" *ngIf="!loaderRegioni;  else elseRegioniCaricate"></sigas-spinner-form>
                        <ng-template #elseRegioniCaricate>
                            <select class="form-control" id="regione" [(ngModel)]="dichiaranteModel.regione.id" name="regione"
                                (change)="loadProvince(dichiaranteModel.regione.id)">
                                <option *ngFor="let reg of regioniModel" [value]="reg.id">{{reg.denominazione}}</option>
                            </select>
                        </ng-template>
                    </div>
                    <div class="col-lg-1 "></div>
                </div>
                 -->
                
                
                
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1 "></div>
                    <label for="provincia " class="col-lg-3 col-form-label ">Provincia:</label>
                    <div class="col-lg-4 ">
                        <sigas-spinner-form [diameter]="30" *ngIf="!loaderProvince;  else elseProvinciaCaricate"></sigas-spinner-form>
                        <ng-template #elseProvinciaCaricate>
                            <select class="form-control" id="provincia" [(ngModel)]="dichiaranteModel.provincia.id"
                                name="provincia" (change)="loadComuni(dichiaranteModel.provincia.id)">
                                <option *ngFor="let prov of provinciaModel" [value]="prov.id">{{prov.denominazione}}</option>
                            </select>
                        </ng-template>
                    </div>
                    <div class="col-lg-1 "></div>
                </div>
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1 "></div>
                    <label for="comune " class="col-lg-3 col-form-label ">Comune:</label>
                    <div class="col-lg-4 ">
                        <sigas-spinner-form [diameter]="30" *ngIf="!loaderComuni;  else elseComuniCaricati"></sigas-spinner-form>
                        <ng-template #elseComuniCaricati>
                            <select class="form-control" id="comune" [(ngModel)]="dichiaranteModel.comune.id" name="comune"                                
                                [disabled]="dichiaranteModel.provincia.id==null">
                                <option *ngFor="let com of comuniModel" [value]="com.id">{{com.denominazione}}</option>
                            </select>
                        </ng-template>
                    </div>
                    <div class="col-lg-1 "></div>
                </div>
                <!-- 
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1 "></div>
                    <label for="indirizzi " class="col-lg-3 col-form-label ">Indirizzo:</label>
                    <div class="col-lg-4 ">
                        <sigas-spinner-form [diameter]="30" *ngIf="!loaderIndirizzo"></sigas-spinner-form>
                        <input list="indirizzi" *ngIf="loaderIndirizzo" [disabled]="disableIndirizzo()" maxlength="250"
                            [required]="dichiaranteModel.indirizzoNonTrovato==null || dichiaranteModel.indirizzoNonTrovato== ''"
                            [(ngModel)]="dichiaranteModel.indirizzo" (ngModelChange)="indirizzoChange($event)" name="indirizzo"
                            class="form-control"   #ind="ngModel">
                        <datalist id="indirizzi">
                            <option *ngFor="let indirizzo of elencoIndirizzi" [value]="indirizzo">{{indirizzo}}</option>
                        </datalist>
                    </div>
                </div>
                
 -->
 
 				<div class="form-group row col-lg-12">
                    <div class="col-lg-1 "></div>
                    <label for="indirizzi " class="col-lg-3 col-form-label ">Indirizzo:</label>
                    <div class="col-lg-4 ">
                        <sigas-spinner-form [diameter]="30" *ngIf="!loaderIndirizzo"></sigas-spinner-form>
                        <input list="indirizzi" *ngIf="loaderIndirizzo"  maxlength="250"
                            [(ngModel)]="dichiaranteModel.indirizzo" name="indirizzo"
                            class="form-control"   #ind="ngModel">
                        
                    </div>
                </div>
                
				<div class="form-group row col-lg-12">
                    <div class="col-lg-1"></div>
                    <label for="iban" class="col-lg-3 col-form-label">Iban:</label>
                    <div class="col-lg-4">
                        <div>
                            <input type="text" class="form-control col-lg-6 col-form-label" id="iban"
                                placeholder="Iban" [(ngModel)]="dichiaranteModel.iban" name="iban"
                                #iban="ngModel"  maxlength="150">
                        </div>
                    </div>
                    <div class="col-lg-4"></div>
                </div>
                
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1"></div>
                    <label for="telefono" class="col-lg-3 col-form-label">Telefono:</label>
                    <div class="col-lg-4">
                        <div>
                            <input type="text" class="form-control col-lg-6 col-form-label" id="telefono"
                                placeholder="Telefono" [(ngModel)]="dichiaranteModel.telefonoDichiarante" name="telefono" pattern="^[0-9\-\+\s\(\)]*$"
                                #telefono="ngModel"  required maxlength="25">
                        </div>
                        <div *ngIf="telefono.invalid && (telefono.dirty || telefono.touched)" class="alert alert-danger">
                            <div *ngIf="telefono.errors.required ">
                                Telefono richiesto.
                            </div>
                            <div *ngIf="telefono.errors.pattern ">
                                    Formato telefono non corretto.
                                </div>
                        </div>
                    </div>
                    <div class="col-lg-4"></div>
                </div>
                
                
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1"></div>
                    <label for="pec" class="col-lg-3 col-form-label">Pec:</label>
                    <div class="col-lg-4">
                        <div>
                            <input type="text" class="form-control col-lg-6 col-form-label" id="pec"
                                placeholder="Pec" [(ngModel)]="dichiaranteModel.pecDichiarante" name="pec"  pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" 
                                #pec="ngModel"  [required]="dichiaranteModel.emailDichiarante==null || dichiaranteModel.emailDichiarante==''"  maxlength="150">
                        </div>
                        <div *ngIf="(pec.invalid && (pec.dirty || pec.touched)) && (email.invalid && (email.dirty || email.touched))" class="alert alert-danger">
                            <div *ngIf="pec.errors.required ">
                                Pec o email richiesta.
                            </div>
                            <div *ngIf="pec.errors.pattern">
                                    formato email pec: exemple@exemple.it
                                </div>
                        </div>
                    </div>
                    <div class="col-lg-4"></div>
                </div>
                
                
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1"></div>
                    <label for="email" class="col-lg-3 col-form-label">Email:</label>
                    <div class="col-lg-4">
                        <div>
                            <input type="text" class="form-control col-lg-6 col-form-label" id="email"
                                placeholder="Email" [(ngModel)]="dichiaranteModel.emailDichiarante" name="email" pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" 
                                #email="ngModel"  [required]="dichiaranteModel.pecDichiarante==null || dichiaranteModel.pecDichiarante==''" maxlength="150">
                        </div>
                        <div *ngIf="(email.invalid && (email.dirty || email.touched)) && (pec.invalid && (pec.dirty || pec.touched))" class="alert alert-danger">
                            <div *ngIf="email.errors.required ">
                                Email o pec richiesta.
                            </div>
                             <div *ngIf="email.errors.pattern">
                                    formato email: exemple@exemple.it
                                </div>
                        </div>
                    </div>
                    <div class="col-lg-4"></div>
                </div>
                
                
                <!-- 
                <div class="form-group row col-lg-12">
                    <div class="col-lg-1"></div>
                    <label for="email" class="col-lg-3 col-form-label">Note:</label>
                    <div class="col-lg-4">
                        <textarea class="note-textarea" rows="4" [(ngModel)]="dichiaranteModel.note" id="note" 
                         [ngModelOptions]="{standalone: true}">
                        </textarea>
                       
                    </div>
                    <div class="col-lg-4"></div>
                </div>
                 -->
                



                <!--pulsanti-->
                <div class="bs-example" data-example-id="single-button-dropdown">
                    <div class="form-group row col-lg-12">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                            <div class="btn-group">
                                <a class="btn btn-default margin-icon btn-standard" (click)="annullaInsDichiarante()" role="button">
                                    <i class="fa fa-angle-left glyphicon glyphicon-chevron-left"></i>
                                    indietro</a>
                            </div>
                            <div class="btn-group">
                                <button type="button" (click)="cancellaInsDichiarante()" class="btn btn-primary margin-icon btn-standard">
                                    <i class="fa fa-angle-left glyphicon glyphicon-remove"></i>
                                    Cancella</button>
                            </div>
                            <div class="btn-group">
                                <button type="button" [disabled]="!insDichiarante.form.valid" class="btn btn-primary margin-icon btn-standard" (click)="inserisciDichiarante()">
                                    <i class="fa fa-angle-right glyphicon glyphicon-ok"></i> Conferma</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!--pulsanti-->
            </div>
        </form>
		</div>
    </div>
    
 
</div>